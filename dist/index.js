module.exports=function(t,e){"use strict";var r={};function __webpack_require__(e){if(r[e]){return r[e].exports}var n=r[e]={i:e,l:false,exports:{}};t[e].call(n.exports,n,n.exports,__webpack_require__);n.l=true;return n.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(325)}return startup()}({36:function(t){t.exports=require("string_decoder")},58:function(t){t.exports=require("readline")},87:function(t){t.exports=require("os")},129:function(t){t.exports=require("child_process")},304:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:true});const s=n(r(413));const i=r(391);class Analyzer extends i.StaticCodeAnalyzer{constructor(t=[]){super(Analyzer.command,t.concat(["--no-progress","--no-exit-on-warn","-f","json"]),undefined,2)}prepare(){return i.tool.installGem(true,Analyzer.command)}createTransformStreams(){const t=[];const e=new s.default.Transform({readableObjectMode:true,transform:function(e,r,n){t.push(e);n()},flush:function(e){const r=JSON.parse(Buffer.concat(t).toString());console.log(`::debug::Detected ${r.warnings.length} problem(s).`);for(const t of r.warnings)this.push({file:t.file,line:t.line,column:0,severity:"warning",message:`[${t.confidence}] ${t.warning_type}: ${t.message}`,code:t.check_name});this.push(null);e()}});return[e,e]}}e.default=Analyzer;Analyzer.command="brakeman"},325:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:true});const s=n(r(304));(async()=>{const t=JSON.parse(process.env.INPUT_OPTIONS||"[]");const e=process.env.INPUT_WORKING_DIRECTORY;e&&process.chdir(e);const r=new s.default(t);process.exitCode=await r.analyze()})().catch(t=>{console.log(`::error::${String(t)}`);process.exit(1)})},357:function(t){t.exports=require("assert")},391:function(t,e,r){t.exports=function(t,e){"use strict";var r={};function __webpack_require__(e){if(r[e]){return r[e].exports}var n=r[e]={i:e,l:false,exports:{}};t[e].call(n.exports,n,n.exports,__webpack_require__);n.l=true;return n.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(325)}return startup()}({58:function(t){t.exports=r(58)},87:function(t){t.exports=r(87)},93:function(t,e,r){t.exports=minimatch;minimatch.Minimatch=Minimatch;var n={sep:"/"};try{n=r(622)}catch(t){}var s=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var i=r(306);var a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var o="[^/]";var c=o+"*?";var u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var l="(?:(?!(?:\\/|^)\\.).)*?";var f=charSet("().*{}+?[]^$\\!");function charSet(t){return t.split("").reduce(function(t,e){t[e]=true;return t},{})}var p=/\/+/;minimatch.filter=filter;function filter(t,e){e=e||{};return function(r,n,s){return minimatch(r,t,e)}}function ext(t,e){t=t||{};e=e||{};var r={};Object.keys(e).forEach(function(t){r[t]=e[t]});Object.keys(t).forEach(function(e){r[e]=t[e]});return r}minimatch.defaults=function(t){if(!t||!Object.keys(t).length)return minimatch;var e=minimatch;var r=function minimatch(r,n,s){return e.minimatch(r,n,ext(t,s))};r.Minimatch=function Minimatch(r,n){return new e.Minimatch(r,ext(t,n))};return r};Minimatch.defaults=function(t){if(!t||!Object.keys(t).length)return Minimatch;return minimatch.defaults(t).Minimatch};function minimatch(t,e,r){if(typeof e!=="string"){throw new TypeError("glob pattern string required")}if(!r)r={};if(!r.nocomment&&e.charAt(0)==="#"){return false}if(e.trim()==="")return t==="";return new Minimatch(e,r).match(t)}function Minimatch(t,e){if(!(this instanceof Minimatch)){return new Minimatch(t,e)}if(typeof t!=="string"){throw new TypeError("glob pattern string required")}if(!e)e={};t=t.trim();if(n.sep!=="/"){t=t.split(n.sep).join("/")}this.options=e;this.set=[];this.pattern=t;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var t=this.pattern;var e=this.options;if(!e.nocomment&&t.charAt(0)==="#"){this.comment=true;return}if(!t){this.empty=true;return}this.parseNegate();var r=this.globSet=this.braceExpand();if(e.debug)this.debug=console.error;this.debug(this.pattern,r);r=this.globParts=r.map(function(t){return t.split(p)});this.debug(this.pattern,r);r=r.map(function(t,e,r){return t.map(this.parse,this)},this);this.debug(this.pattern,r);r=r.filter(function(t){return t.indexOf(false)===-1});this.debug(this.pattern,r);this.set=r}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var t=this.pattern;var e=false;var r=this.options;var n=0;if(r.nonegate)return;for(var s=0,i=t.length;s<i&&t.charAt(s)==="!";s++){e=!e;n++}if(n)this.pattern=t.substr(n);this.negate=e}minimatch.braceExpand=function(t,e){return braceExpand(t,e)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(t,e){if(!e){if(this instanceof Minimatch){e=this.options}else{e={}}}t=typeof t==="undefined"?this.pattern:t;if(typeof t==="undefined"){throw new TypeError("undefined pattern")}if(e.nobrace||!t.match(/\{.*\}/)){return[t]}return i(t)}Minimatch.prototype.parse=parse;var h={};function parse(t,e){if(t.length>1024*64){throw new TypeError("pattern is too long")}var r=this.options;if(!r.noglobstar&&t==="**")return s;if(t==="")return"";var n="";var i=!!r.nocase;var u=false;var l=[];var p=[];var d;var m=false;var g=-1;var b=-1;var v=t.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var y=this;function clearStateChar(){if(d){switch(d){case"*":n+=c;i=true;break;case"?":n+=o;i=true;break;default:n+="\\"+d;break}y.debug("clearStateChar %j %j",d,n);d=false}}for(var w=0,S=t.length,_;w<S&&(_=t.charAt(w));w++){this.debug("%s\t%s %s %j",t,w,n,_);if(u&&f[_]){n+="\\"+_;u=false;continue}switch(_){case"/":return false;case"\\":clearStateChar();u=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",t,w,n,_);if(m){this.debug("  in class");if(_==="!"&&w===b+1)_="^";n+=_;continue}y.debug("call clearStateChar %j",d);clearStateChar();d=_;if(r.noext)clearStateChar();continue;case"(":if(m){n+="(";continue}if(!d){n+="\\(";continue}l.push({type:d,start:w-1,reStart:n.length,open:a[d].open,close:a[d].close});n+=d==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",d,n);d=false;continue;case")":if(m||!l.length){n+="\\)";continue}clearStateChar();i=true;var x=l.pop();n+=x.close;if(x.type==="!"){p.push(x)}x.reEnd=n.length;continue;case"|":if(m||!l.length||u){n+="\\|";u=false;continue}clearStateChar();n+="|";continue;case"[":clearStateChar();if(m){n+="\\"+_;continue}m=true;b=w;g=n.length;n+=_;continue;case"]":if(w===b+1||!m){n+="\\"+_;u=false;continue}if(m){var P=t.substring(b+1,w);try{RegExp("["+P+"]")}catch(t){var A=this.parse(P,h);n=n.substr(0,g)+"\\["+A[0]+"\\]";i=i||A[1];m=false;continue}}i=true;m=false;n+=_;continue;default:clearStateChar();if(u){u=false}else if(f[_]&&!(_==="^"&&m)){n+="\\"}n+=_}}if(m){P=t.substr(b+1);A=this.parse(P,h);n=n.substr(0,g)+"\\["+A[0];i=i||A[1]}for(x=l.pop();x;x=l.pop()){var O=n.slice(x.reStart+x.open.length);this.debug("setting tail",n,x);O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(t,e,r){if(!r){r="\\"}return e+e+r+"|"});this.debug("tail=%j\n   %s",O,O,x,n);var $=x.type==="*"?c:x.type==="?"?o:"\\"+x.type;i=true;n=n.slice(0,x.reStart)+$+"\\("+O}clearStateChar();if(u){n+="\\\\"}var j=false;switch(n.charAt(0)){case".":case"[":case"(":j=true}for(var E=p.length-1;E>-1;E--){var k=p[E];var T=n.slice(0,k.reStart);var R=n.slice(k.reStart,k.reEnd-8);var C=n.slice(k.reEnd-8,k.reEnd);var z=n.slice(k.reEnd);C+=z;var D=T.split("(").length-1;var M=z;for(w=0;w<D;w++){M=M.replace(/\)[+*?]?/,"")}z=M;var G="";if(z===""&&e!==h){G="$"}var L=T+R+z+G+C;n=L}if(n!==""&&i){n="(?=.)"+n}if(j){n=v+n}if(e===h){return[n,i]}if(!i){return globUnescape(t)}var I=r.nocase?"i":"";try{var B=new RegExp("^"+n+"$",I)}catch(t){return new RegExp("$.")}B._glob=t;B._src=n;return B}minimatch.makeRe=function(t,e){return new Minimatch(t,e||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var t=this.set;if(!t.length){this.regexp=false;return this.regexp}var e=this.options;var r=e.noglobstar?c:e.dot?u:l;var n=e.nocase?"i":"";var i=t.map(function(t){return t.map(function(t){return t===s?r:typeof t==="string"?regExpEscape(t):t._src}).join("\\/")}).join("|");i="^(?:"+i+")$";if(this.negate)i="^(?!"+i+").*$";try{this.regexp=new RegExp(i,n)}catch(t){this.regexp=false}return this.regexp}minimatch.match=function(t,e,r){r=r||{};var n=new Minimatch(e,r);t=t.filter(function(t){return n.match(t)});if(n.options.nonull&&!t.length){t.push(e)}return t};Minimatch.prototype.match=match;function match(t,e){this.debug("match",t,this.pattern);if(this.comment)return false;if(this.empty)return t==="";if(t==="/"&&e)return true;var r=this.options;if(n.sep!=="/"){t=t.split(n.sep).join("/")}t=t.split(p);this.debug(this.pattern,"split",t);var s=this.set;this.debug(this.pattern,"set",s);var i;var a;for(a=t.length-1;a>=0;a--){i=t[a];if(i)break}for(a=0;a<s.length;a++){var o=s[a];var c=t;if(r.matchBase&&o.length===1){c=[i]}var u=this.matchOne(c,o,e);if(u){if(r.flipNegate)return true;return!this.negate}}if(r.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e});this.debug("matchOne",t.length,e.length);for(var i=0,a=0,o=t.length,c=e.length;i<o&&a<c;i++,a++){this.debug("matchOne loop");var u=e[a];var l=t[i];this.debug(e,u,l);if(u===false)return false;if(u===s){this.debug("GLOBSTAR",[e,u,l]);var f=i;var p=a+1;if(p===c){this.debug("** at the end");for(;i<o;i++){if(t[i]==="."||t[i]===".."||!n.dot&&t[i].charAt(0)===".")return false}return true}while(f<o){var h=t[f];this.debug("\nglobstar while",t,f,e,p,h);if(this.matchOne(t.slice(f),e.slice(p),r)){this.debug("globstar found match!",f,o,h);return true}else{if(h==="."||h===".."||!n.dot&&h.charAt(0)==="."){this.debug("dot detected!",t,f,e,p);break}this.debug("globstar swallow a segment, and continue");f++}}if(r){this.debug("\n>>> no match, partial?",t,f,e,p);if(f===o)return true}return false}var d;if(typeof u==="string"){if(n.nocase){d=l.toLowerCase()===u.toLowerCase()}else{d=l===u}this.debug("string match",u,l,d)}else{d=l.match(u);this.debug("pattern match",u,l,d)}if(!d)return false}if(i===o&&a===c){return true}else if(i===o){return r}else if(a===c){var m=i===o-1&&t[i]==="";return m}throw new Error("wtf?")};function globUnescape(t){return t.replace(/\\(.)/g,"$1")}function regExpEscape(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},129:function(t){t.exports=r(129)},281:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){function adopt(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=Promise))(function(r,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n["throw"](t))}catch(t){s(t)}}function step(t){t.done?r(t.value):adopt(t.value).then(fulfilled,rejected)}step((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:true});const s=r(297);function create(t,e){return n(this,void 0,void 0,function*(){return yield s.DefaultGlobber.create(t,e)})}e.create=create},297:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){function adopt(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=Promise))(function(r,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n["throw"](t))}catch(t){s(t)}}function step(t){t.done?r(t.value):adopt(t.value).then(fulfilled,rejected)}step((n=n.apply(t,e||[])).next())})};var s=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values==="function"?__values(t):t[Symbol.iterator](),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(e){r[e]=t[e]&&function(r){return new Promise(function(n,s){r=t[e](r),settle(n,s,r.done,r.value)})}}function settle(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)}};var i=this&&this.__await||function(t){return this instanceof i?(this.v=t,this):new i(t)};var a=this&&this.__asyncGenerator||function(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s={},verb("next"),verb("throw"),verb("return"),s[Symbol.asyncIterator]=function(){return this},s;function verb(t){if(n[t])s[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||resume(t,e)})}}function resume(t,e){try{step(n[t](e))}catch(t){settle(a[0][3],t)}}function step(t){t.value instanceof i?Promise.resolve(t.value.v).then(fulfill,reject):settle(a[0][2],t)}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,e){if(t(e),a.shift(),a.length)resume(a[0][0],a[0][1])}};Object.defineProperty(e,"__esModule",{value:true});const o=r(470);const c=r(747);const u=r(601);const l=r(622);const f=r(597);const p=r(327);const h=r(923);const d=r(728);const m=process.platform==="win32";class DefaultGlobber{constructor(t){this.patterns=[];this.searchPaths=[];this.options=u.getOptions(t)}getSearchPaths(){return this.searchPaths.slice()}glob(){var t,e;return n(this,void 0,void 0,function*(){const r=[];try{for(var n=s(this.globGenerator()),i;i=yield n.next(),!i.done;){const t=i.value;r.push(t)}}catch(e){t={error:e}}finally{try{if(i&&!i.done&&(e=n.return))yield e.call(n)}finally{if(t)throw t.error}}return r})}globGenerator(){return a(this,arguments,function*globGenerator_1(){const t=u.getOptions(this.options);const e=[];for(const r of this.patterns){e.push(r);if(t.implicitDescendants&&(r.trailingSeparator||r.segments[r.segments.length-1]!=="**")){e.push(new h.Pattern(r.negate,r.segments.concat("**")))}}const r=[];for(const n of f.getSearchPaths(e)){o.debug(`Search path '${n}'`);try{yield i(c.promises.lstat(n))}catch(t){if(t.code==="ENOENT"){continue}throw t}r.unshift(new d.SearchState(n,1))}const n=[];while(r.length){const s=r.pop();const a=f.match(e,s.path);const o=!!a||f.partialMatch(e,s.path);if(!a&&!o){continue}const u=yield i(DefaultGlobber.stat(s,t,n));if(!u){continue}if(u.isDirectory()){if(a&p.MatchKind.Directory){yield yield i(s.path)}else if(!o){continue}const t=s.level+1;const e=(yield i(c.promises.readdir(s.path))).map(e=>new d.SearchState(l.join(s.path,e),t));r.push(...e.reverse())}else if(a&p.MatchKind.File){yield yield i(s.path)}}})}static create(t,e){return n(this,void 0,void 0,function*(){const r=new DefaultGlobber(e);if(m){t=t.replace(/\r\n/g,"\n");t=t.replace(/\r/g,"\n")}const n=t.split("\n").map(t=>t.trim());for(const t of n){if(!t||t.startsWith("#")){continue}else{r.patterns.push(new h.Pattern(t))}}r.searchPaths.push(...f.getSearchPaths(r.patterns));return r})}static stat(t,e,r){return n(this,void 0,void 0,function*(){let n;if(e.followSymbolicLinks){try{n=yield c.promises.stat(t.path)}catch(r){if(r.code==="ENOENT"){if(e.omitBrokenSymbolicLinks){o.debug(`Broken symlink '${t.path}'`);return undefined}throw new Error(`No information found for the path '${t.path}'. This may indicate a broken symbolic link.`)}throw r}}else{n=yield c.promises.lstat(t.path)}if(n.isDirectory()&&e.followSymbolicLinks){const e=yield c.promises.realpath(t.path);while(r.length>=t.level){r.pop()}if(r.some(t=>t===e)){o.debug(`Symlink cycle detected for path '${t.path}' and realpath '${e}'`);return undefined}r.push(e)}return n})}}e.DefaultGlobber=DefaultGlobber},304:function(t){t.exports=r(36)},306:function(t,e,r){var n=r(896);var s=r(621);t.exports=expandTop;var i="\0SLASH"+Math.random()+"\0";var a="\0OPEN"+Math.random()+"\0";var o="\0CLOSE"+Math.random()+"\0";var c="\0COMMA"+Math.random()+"\0";var u="\0PERIOD"+Math.random()+"\0";function numeric(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function escapeBraces(t){return t.split("\\\\").join(i).split("\\{").join(a).split("\\}").join(o).split("\\,").join(c).split("\\.").join(u)}function unescapeBraces(t){return t.split(i).join("\\").split(a).join("{").split(o).join("}").split(c).join(",").split(u).join(".")}function parseCommaParts(t){if(!t)return[""];var e=[];var r=s("{","}",t);if(!r)return t.split(",");var n=r.pre;var i=r.body;var a=r.post;var o=n.split(",");o[o.length-1]+="{"+i+"}";var c=parseCommaParts(a);if(a.length){o[o.length-1]+=c.shift();o.push.apply(o,c)}e.push.apply(e,o);return e}function expandTop(t){if(!t)return[];if(t.substr(0,2)==="{}"){t="\\{\\}"+t.substr(2)}return expand(escapeBraces(t),true).map(unescapeBraces)}function identity(t){return t}function embrace(t){return"{"+t+"}"}function isPadded(t){return/^-?0\d/.test(t)}function lte(t,e){return t<=e}function gte(t,e){return t>=e}function expand(t,e){var r=[];var i=s("{","}",t);if(!i||/\$$/.test(i.pre))return[t];var a=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body);var c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body);var u=a||c;var l=i.body.indexOf(",")>=0;if(!u&&!l){if(i.post.match(/,.*\}/)){t=i.pre+"{"+i.body+o+i.post;return expand(t)}return[t]}var f;if(u){f=i.body.split(/\.\./)}else{f=parseCommaParts(i.body);if(f.length===1){f=expand(f[0],false).map(embrace);if(f.length===1){var p=i.post.length?expand(i.post,false):[""];return p.map(function(t){return i.pre+f[0]+t})}}}var h=i.pre;var p=i.post.length?expand(i.post,false):[""];var d;if(u){var m=numeric(f[0]);var g=numeric(f[1]);var b=Math.max(f[0].length,f[1].length);var v=f.length==3?Math.abs(numeric(f[2])):1;var y=lte;var w=g<m;if(w){v*=-1;y=gte}var S=f.some(isPadded);d=[];for(var _=m;y(_,g);_+=v){var x;if(c){x=String.fromCharCode(_);if(x==="\\")x=""}else{x=String(_);if(S){var P=b-x.length;if(P>0){var A=new Array(P+1).join("0");if(_<0)x="-"+A+x.slice(1);else x=A+x}}}d.push(x)}}else{d=n(f,function(t){return expand(t,false)})}for(var O=0;O<d.length;O++){for(var $=0;$<p.length;$++){var j=h+d[O]+p[$];if(!e||u||j)r.push(j)}}return r}},325:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))e[r]=t[r];e["default"]=t;return e};Object.defineProperty(e,"__esModule",{value:true});const i=r(357);const a=n(r(747));const o=n(r(87));const c=n(r(622));const u=n(r(58));const l=n(r(413));const f=n(r(669));const p=s(r(281));const h=s(r(743));e.tool=h;const d=f.default.debuglog("@moneyforward/sca-action-core");const m=async(t,e)=>{const r="git";const n=await h.execute(r,["remote","-v"],undefined,undefined,async t=>{i.strict(t.stdout!==null);if(t.stdout==null)return"";t.stdout.unpipe(process.stdout);const e=[];for await(const r of u.default.createInterface(t.stdout))if(/\bgithub\.com\b/.test(r)&&/ \(fetch\)$/.test(r))e.push(r);return e.map(t=>t.split("\t",1)[0])[0]});const s=await[t,e].map(t=>()=>h.execute(r,["rev-parse","--verify","-q",t],undefined,undefined,async t=>{i.strict(t.stdout!==null);if(t.stdout==null)return;t.stdout.unpipe(process.stdout);return h.stringify(t.stdout)}).catch(async()=>{await h.execute(r,["fetch","--depth=1","-q",n,t]);return h.execute(r,["rev-parse","--verify","-q",`${n}/${t}`],undefined,undefined,async t=>{i.strict(t.stdout!==null);if(t.stdout==null)return;t.stdout.unpipe(process.stdout);return h.stringify(t.stdout)})}).then(t=>(t||"").trim())).reduce((t,e)=>t.then(async t=>t.concat(await e())),Promise.resolve([]));const a=["--no-pager","diff","--no-prefix","--no-color","-U0","--diff-filter=b",s.join("...")];return h.execute(r,a,undefined,undefined,async t=>{const e=new Map;i.strict(t.stdout!==null);if(t.stdout==null)return e;t.stdout.unpipe(process.stdout);const r=[];for await(const e of u.default.createInterface(t.stdout))/^([@]{2}|[+]{3})\s/.test(e)&&r.push(e);let n="";for(const t of r){if(/^[+]{3}\s/.test(t)){n=t.substring("+++ ".length);continue}const r=((/^@@ (.*) @@.*$/.exec(t)||[])[1]||"").split(" ");const[s,i=1]=r[r.length-1].split(",").map(Number).map(Math.abs);e.set(n,(e.get(n)||[]).concat([[s,s+i-1]]))}return e})};e.find=(async t=>{const e=async function*(){for(const e of t.replace(/[\r\n]+/g,"\n").split("\n").filter(t=>t!==""))yield e};return e});e.findByGlob=(async t=>{const e=await p.create(t);const r=async function*(){for await(const t of e.globGenerator()){if((await a.default.promises.stat(t)).isDirectory())continue;yield c.default.relative(process.cwd(),t)}};return r});class StaticCodeAnalyzer{constructor(t,r=[],n={},s=1,i=e.find){this.command=t;this.args=r;this.options=n;this.exitStatusThreshold=s;this.finder=i;this.problemMatchers={problemMatcher:[{owner:"analyze-result.tsv",pattern:[{regexp:"^\\[([^\\t]+)\\] Detected `([^\\t]+)` problem at line (\\d+), column (\\d+) of ([^\\t]+)\\t([^\\t]+)$",file:5,line:3,column:4,severity:1,message:6,code:2}]}]};this.initArgumentsSize=[this.command].concat(this.args).map(h.sizeOf).reduce((t,e)=>t+e,0)}execute(t,e){return h.execute(this.command,t,this.options,this.exitStatusThreshold,t=>new Promise((r,n)=>{i.strict(t.stdout!==null);t.stdout&&t.stdout.unpipe(process.stdout);const[s=new l.default.PassThrough,a=s]=this.createTransformStreams().map(t=>t.once("error",n));d("prev = %s, next = %s",s,a);t.stdout&&t.stdout.pipe(s);a.pipe((()=>{let t=0;return new l.default.Writable({objectMode:true,write:function(r,n,s){const i=c.default.relative(process.cwd(),r.file);const a=Number(r.line);const o=e.get(i)||[];for(const[e,n]of o)if(a>=e&&a<=n){const e=[r.severity,r.code,a,Number(r.column),i,r.message].map(t=>typeof t==="number"?t:(t===undefined?"":String(t)).replace(/\s+/g," "));console.log(`[%s] Detected \`%s\` problem at line %d, column %d of %s\t%s`,...e);t+=1;break}s()},final:function(e){if(t>0){console.log(`Detected ${t} issue(s).`)}e();r(t>0?1:0)}})})()).once("error",n)}))}async analyze(t="."){console.log(`::group::Analyze code statically using ${this.command}`);try{await this.prepare();i.strict(process.env.GITHUB_BASE_REF,"Environment variable `GITHUB_BASE_REF` is undefined.");i.strict(process.env.GITHUB_HEAD_REF,"Environment variable `GITHUB_HEAD_REF` is undefined.");const e=await m(process.env.GITHUB_BASE_REF||"",process.env.GITHUB_HEAD_REF||"");const r=c.default.join(a.default.mkdtempSync(c.default.join(o.default.tmpdir(),`-`)),"problem-matcher.json");a.default.writeFileSync(r,JSON.stringify(this.problemMatchers));console.log(`::add-matcher::${r}`);const n=h.calculateMaxArgumentsSize(process);const s=[];const u=[];let l=this.initArgumentsSize;for await(const r of(await this.finder(t))()){const t=h.sizeOf(r);if(t+l>n){s.push(this.execute(this.args.concat(u),e));u.length=0;l=this.initArgumentsSize}u.push(r);l+=t}if(u.length)s.push(this.execute(this.args.concat(u),e));console.log("::debug::%d promise(s)",s.length);return await Promise.all(s).then(t=>t.some(t=>t>0)?1:0).finally(()=>{console.log("::remove-matcher owner=analyze-result.tsv::")})}finally{console.log(`::endgroup::`)}}}e.StaticCodeAnalyzer=StaticCodeAnalyzer},327:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});var r;(function(t){t[t["None"]=0]="None";t[t["Directory"]=1]="Directory";t[t["File"]=2]="File";t[t["All"]=3]="All"})(r=e.MatchKind||(e.MatchKind={}))},357:function(t){t.exports=r(357)},383:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});const n=r(357);const s=r(622);const i=r(972);const a=process.platform==="win32";class Path{constructor(t){this.segments=[];if(typeof t==="string"){n(t,`Parameter 'itemPath' must not be empty`);t=i.safeTrimTrailingSeparator(t);if(!i.hasRoot(t)){this.segments=t.split(s.sep)}else{let e=t;let r=i.dirname(e);while(r!==e){const t=s.basename(e);this.segments.unshift(t);e=r;r=i.dirname(e)}this.segments.unshift(e)}}else{n(t.length>0,`Parameter 'itemPath' must not be an empty array`);for(let e=0;e<t.length;e++){let r=t[e];n(r,`Parameter 'itemPath' must not contain any empty segments`);r=i.normalizeSeparators(t[e]);if(e===0&&i.hasRoot(r)){r=i.safeTrimTrailingSeparator(r);n(r===i.dirname(r),`Parameter 'itemPath' root segment contains information for multiple segments`);this.segments.push(r)}else{n(!r.includes(s.sep),`Parameter 'itemPath' contains unexpected path separators`);this.segments.push(r)}}}}toString(){let t=this.segments[0];let e=t.endsWith(s.sep)||a&&/^[A-Z]:$/i.test(t);for(let r=1;r<this.segments.length;r++){if(e){e=false}else{t+=s.sep}t+=this.segments[r]}return t}}e.Path=Path},413:function(t){t.exports=r(413)},431:function(t,e,r){"use strict";var n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))e[r]=t[r];e["default"]=t;return e};Object.defineProperty(e,"__esModule",{value:true});const s=n(r(87));function issueCommand(t,e,r){const n=new Command(t,e,r);process.stdout.write(n.toString()+s.EOL)}e.issueCommand=issueCommand;function issue(t,e=""){issueCommand(t,{},e)}e.issue=issue;const i="::";class Command{constructor(t,e,r){if(!t){t="missing.command"}this.command=t;this.properties=e;this.message=r}toString(){let t=i+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let e=true;for(const r in this.properties){if(this.properties.hasOwnProperty(r)){const n=this.properties[r];if(n){if(e){e=false}else{t+=","}t+=`${r}=${escapeProperty(n)}`}}}}t+=`${i}${escapeData(this.message)}`;return t}}function escapeData(t){return(t||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(t){return(t||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},470:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){function adopt(t){return t instanceof r?t:new r(function(e){e(t)})}return new(r||(r=Promise))(function(r,s){function fulfilled(t){try{step(n.next(t))}catch(t){s(t)}}function rejected(t){try{step(n["throw"](t))}catch(t){s(t)}}function step(t){t.done?r(t.value):adopt(t.value).then(fulfilled,rejected)}step((n=n.apply(t,e||[])).next())})};var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)if(Object.hasOwnProperty.call(t,r))e[r]=t[r];e["default"]=t;return e};Object.defineProperty(e,"__esModule",{value:true});const i=r(431);const a=s(r(87));const o=s(r(622));var c;(function(t){t[t["Success"]=0]="Success";t[t["Failure"]=1]="Failure"})(c=e.ExitCode||(e.ExitCode={}));function exportVariable(t,e){process.env[t]=e;i.issueCommand("set-env",{name:t},e)}e.exportVariable=exportVariable;function setSecret(t){i.issueCommand("add-mask",{},t)}e.setSecret=setSecret;function addPath(t){i.issueCommand("add-path",{},t);process.env["PATH"]=`${t}${o.delimiter}${process.env["PATH"]}`}e.addPath=addPath;function getInput(t,e){const r=process.env[`INPUT_${t.replace(/ /g,"_").toUpperCase()}`]||"";if(e&&e.required&&!r){throw new Error(`Input required and not supplied: ${t}`)}return r.trim()}e.getInput=getInput;function setOutput(t,e){i.issueCommand("set-output",{name:t},e)}e.setOutput=setOutput;function setFailed(t){process.exitCode=c.Failure;error(t)}e.setFailed=setFailed;function isDebug(){return process.env["RUNNER_DEBUG"]==="1"}e.isDebug=isDebug;function debug(t){i.issueCommand("debug",{},t)}e.debug=debug;function error(t){i.issue("error",t)}e.error=error;function warning(t){i.issue("warning",t)}e.warning=warning;function info(t){process.stdout.write(t+a.EOL)}e.info=info;function startGroup(t){i.issue("group",t)}e.startGroup=startGroup;function endGroup(){i.issue("endgroup")}e.endGroup=endGroup;function group(t,e){return n(this,void 0,void 0,function*(){startGroup(t);let r;try{r=yield e()}finally{endGroup()}return r})}e.group=group;function saveState(t,e){i.issueCommand("save-state",{name:t},e)}e.saveState=saveState;function getState(t){return process.env[`STATE_${t}`]||""}e.getState=getState},597:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});const n=r(972);const s=r(327);const i=process.platform==="win32";function getSearchPaths(t){t=t.filter(t=>!t.negate);const e={};for(const r of t){const t=i?r.searchPath.toUpperCase():r.searchPath;e[t]="candidate"}const r=[];for(const s of t){const t=i?s.searchPath.toUpperCase():s.searchPath;if(e[t]==="included"){continue}let a=false;let o=t;let c=n.dirname(o);while(c!==o){if(e[c]){a=true;break}o=c;c=n.dirname(o)}if(!a){r.push(s.searchPath);e[t]="included"}}return r}e.getSearchPaths=getSearchPaths;function match(t,e){let r=s.MatchKind.None;for(const n of t){if(n.negate){r&=~n.match(e)}else{r|=n.match(e)}}return r}e.match=match;function partialMatch(t,e){return t.some(t=>!t.negate&&t.partialMatch(e))}e.partialMatch=partialMatch},601:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});const n=r(470);function getOptions(t){const e={followSymbolicLinks:true,implicitDescendants:true,omitBrokenSymbolicLinks:true};if(t){if(typeof t.followSymbolicLinks==="boolean"){e.followSymbolicLinks=t.followSymbolicLinks;n.debug(`followSymbolicLinks '${e.followSymbolicLinks}'`)}if(typeof t.implicitDescendants==="boolean"){e.implicitDescendants=t.implicitDescendants;n.debug(`implicitDescendants '${e.implicitDescendants}'`)}if(typeof t.omitBrokenSymbolicLinks==="boolean"){e.omitBrokenSymbolicLinks=t.omitBrokenSymbolicLinks;n.debug(`omitBrokenSymbolicLinks '${e.omitBrokenSymbolicLinks}'`)}}return e}e.getOptions=getOptions},621:function(t){"use strict";t.exports=balanced;function balanced(t,e,r){if(t instanceof RegExp)t=maybeMatch(t,r);if(e instanceof RegExp)e=maybeMatch(e,r);var n=range(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function maybeMatch(t,e){var r=e.match(t);return r?r[0]:null}balanced.range=range;function range(t,e,r){var n,s,i,a,o;var c=r.indexOf(t);var u=r.indexOf(e,c+1);var l=c;if(c>=0&&u>0){n=[];i=r.length;while(l>=0&&!o){if(l==c){n.push(l);c=r.indexOf(t,l+1)}else if(n.length==1){o=[n.pop(),u]}else{s=n.pop();if(s<i){i=s;a=u}u=r.indexOf(e,l+1)}l=c<u&&c>=0?c:u}if(n.length){o=[i,a]}}return o}},622:function(t){t.exports=r(622)},669:function(t){t.exports=r(669)},728:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});class SearchState{constructor(t,e){this.path=t;this.level=e}}e.SearchState=SearchState},743:function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:true});const s=r(129);const i=n(r(747));const a=n(r(87));const o=n(r(622));const c=n(r(58));const u=n(r(413));const l=r(304);function sizeOf(t){return Buffer.from(t).length}e.sizeOf=sizeOf;function sizeOfEnvironment(t){return Object.keys(t).map(e=>sizeOf(`${e}=${t[e]} || '`)).reduce((t,e)=>t+e,0)}function calculateMaxArgumentsSize(t){return t.platform==="win32"?8191:131072-2048-sizeOfEnvironment(t.env)}e.calculateMaxArgumentsSize=calculateMaxArgumentsSize;e.execute=((t,e=[],r={},n=1,i)=>{return new Promise((a,o)=>{let c;const u=s.spawn(t,e,r).once("error",o).once("exit",t=>c=t);u.stdout&&u.stdout.pipe(process.stdout);u.stderr&&u.stderr.pipe(process.stderr);const l=i?i(u):Promise.resolve(undefined);const f=async t=>t===null||t>=n?o(t):a(await l);if(c!==undefined)f(c);u.once("exit",f)})});e.stringify=(async t=>{const e=[];for await(const r of t)e.push(r);return Buffer.concat(e).toString().trim()});e.substitute=((t,r=[],n,i)=>new Promise((a,o)=>{const c=s.spawn(t,r,Object.assign({},n,{stdio:[i,"pipe","ignore"]})).once("error",o);if(c.stdout===null)return a("");e.stringify(c.stdout).then(a).catch(o)}));e.installGem=(async(t=true,...r)=>(async()=>{console.log(`::group::Installing gems...`)})().then(async()=>{return await Promise.all([(async()=>{const n=await(async(...e)=>{const r=new Map(e.map(t=>[t,undefined]));const n="Gemfile.lock";if(!i.default.existsSync(n))return r;const s=new RegExp(`^ {4}(${e.map(e=>t?e:e+"\\b[\\w-]*").join("|")}) \\((.*)\\)$`);for await(const t of c.default.createInterface(i.default.createReadStream(n))){const[e,n,i]=s.exec(t)||[];if(e)r.set(n,i)}return r})(...r);await(async(t,...r)=>{const n=["install"].concat(r);for(const[e,r]of t)n.push(`${e}${r&&":"+r||""}`);return e.execute("gem",n)})(n,"-N","--user-install");return n})(),(async()=>{const t=await e.substitute("gem",["environment","gempath"]);const r=(t?t.split(o.default.delimiter):[]).map(t=>o.default.join(t,"bin"));process.env["PATH"]=r.concat(process.env.PATH||"").join(o.default.delimiter)})()]).then(([t])=>t)}).finally(()=>console.log(`::endgroup::`)));class LineTransformStream extends u.default.Transform{constructor(t){super({writableObjectMode:true});this.decoder=new l.StringDecoder(t);this.buffer=""}_transform(t,e,r){try{const e=this.decoder.write(t);const n=(this.buffer+e).split(a.default.EOL);const s=n.pop();for(const t of n)this.push(t);this.buffer=s||"";r()}catch(t){r(t)}}_flush(t){try{const e=this.decoder.end();const r=(this.buffer+e).split(a.default.EOL);const n=r.pop();for(const t of r)this.push(t);if(n&&n.length)this.push(n);t()}catch(e){t(e)}}}e.LineTransformStream=LineTransformStream},747:function(t){t.exports=r(747)},896:function(t){t.exports=function(t,r){var n=[];for(var s=0;s<t.length;s++){var i=r(t[s],s);if(e(i))n.push.apply(n,i);else n.push(i)}return n};var e=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"}},923:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});const n=r(357);const s=r(87);const i=r(622);const a=r(972);const o=r(93);const c=r(327);const u=r(383);const l=process.platform==="win32";class Pattern{constructor(t,e){this.negate=false;let r;if(typeof t==="string"){r=t.trim()}else{e=e||[];n(e.length,`Parameter 'segments' must not empty`);const s=Pattern.getLiteral(e[0]);n(s&&a.hasAbsoluteRoot(s),`Parameter 'segments' first element must be a root path`);r=new u.Path(e).toString().trim();if(t){r=`!${r}`}}while(r.startsWith("!")){this.negate=!this.negate;r=r.substr(1).trim()}r=Pattern.fixupPattern(r);this.segments=new u.Path(r).segments;this.trailingSeparator=a.normalizeSeparators(r).endsWith(i.sep);r=a.safeTrimTrailingSeparator(r);let s=false;const c=this.segments.map(t=>Pattern.getLiteral(t)).filter(t=>!s&&!(s=t===""));this.searchPath=new u.Path(c).toString();this.rootRegExp=new RegExp(Pattern.regExpEscape(c[0]),l?"i":"");const f={dot:true,nobrace:true,nocase:l,nocomment:true,noext:true,nonegate:true};r=l?r.replace(/\\/g,"/"):r;this.minimatch=new o.Minimatch(r,f)}match(t){if(this.segments[this.segments.length-1]==="**"){t=a.normalizeSeparators(t);if(!t.endsWith(i.sep)){t=`${t}${i.sep}`}}else{t=a.safeTrimTrailingSeparator(t)}if(this.minimatch.match(t)){return this.trailingSeparator?c.MatchKind.Directory:c.MatchKind.All}return c.MatchKind.None}partialMatch(t){t=a.safeTrimTrailingSeparator(t);if(a.dirname(t)===t){return this.rootRegExp.test(t)}return this.minimatch.matchOne(t.split(l?/\\+/:/\/+/),this.minimatch.set[0],true)}static globEscape(t){return(l?t:t.replace(/\\/g,"\\\\")).replace(/(\[)(?=[^/]+\])/g,"[[]").replace(/\?/g,"[?]").replace(/\*/g,"[*]")}static fixupPattern(t){n(t,"pattern cannot be empty");const e=new u.Path(t).segments.map(t=>Pattern.getLiteral(t));n(e.every((t,e)=>(t!=="."||e===0)&&t!==".."),`Invalid pattern '${t}'. Relative pathing '.' and '..' is not allowed.`);n(!a.hasRoot(t)||e[0],`Invalid pattern '${t}'. Root segment must not contain globs.`);t=a.normalizeSeparators(t);if(t==="."||t.startsWith(`.${i.sep}`)){t=Pattern.globEscape(process.cwd())+t.substr(1)}else if(t==="~"||t.startsWith(`~${i.sep}`)){const e=s.homedir();n(e,"Unable to determine HOME directory");n(a.hasAbsoluteRoot(e),`Expected HOME directory to be a rooted path. Actual '${e}'`);t=Pattern.globEscape(e)+t.substr(1)}else if(l&&(t.match(/^[A-Z]:$/i)||t.match(/^[A-Z]:[^\\]/i))){let e=a.ensureAbsoluteRoot("C:\\dummy-root",t.substr(0,2));if(t.length>2&&!e.endsWith("\\")){e+="\\"}t=Pattern.globEscape(e)+t.substr(2)}else if(l&&(t==="\\"||t.match(/^\\[^\\]/))){let e=a.ensureAbsoluteRoot("C:\\dummy-root","\\");if(!e.endsWith("\\")){e+="\\"}t=Pattern.globEscape(e)+t.substr(1)}else{t=a.ensureAbsoluteRoot(Pattern.globEscape(process.cwd()),t)}return a.normalizeSeparators(t)}static getLiteral(t){let e="";for(let r=0;r<t.length;r++){const n=t[r];if(n==="\\"&&!l&&r+1<t.length){e+=t[++r];continue}else if(n==="*"||n==="?"){return""}else if(n==="["&&r+1<t.length){let n="";let s=-1;for(let e=r+1;e<t.length;e++){const r=t[e];if(r==="\\"&&!l&&e+1<t.length){n+=t[++e];continue}else if(r==="]"){s=e;break}else{n+=r}}if(s>=0){if(n.length>1){return""}if(n){e+=n;r=s;continue}}}e+=n}return e}static regExpEscape(t){return t.replace(/[[\\^$.|?*+()]/g,"\\$&")}}e.Pattern=Pattern},972:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:true});const n=r(357);const s=r(622);const i=process.platform==="win32";function dirname(t){t=safeTrimTrailingSeparator(t);if(i&&/^\\\\[^\\]+(\\[^\\]+)?$/.test(t)){return t}let e=s.dirname(t);if(i&&/^\\\\[^\\]+\\[^\\]+\\$/.test(e)){e=safeTrimTrailingSeparator(e)}return e}e.dirname=dirname;function ensureAbsoluteRoot(t,e){n(t,`ensureAbsoluteRoot parameter 'root' must not be empty`);n(e,`ensureAbsoluteRoot parameter 'itemPath' must not be empty`);if(hasAbsoluteRoot(e)){return e}if(i){if(e.match(/^[A-Z]:[^\\/]|^[A-Z]:$/i)){let t=process.cwd();n(t.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${t}'`);if(e[0].toUpperCase()===t[0].toUpperCase()){if(e.length===2){return`${e[0]}:\\${t.substr(3)}`}else{if(!t.endsWith("\\")){t+="\\"}return`${e[0]}:\\${t.substr(3)}${e.substr(2)}`}}else{return`${e[0]}:\\${e.substr(2)}`}}else if(normalizeSeparators(e).match(/^\\$|^\\[^\\]/)){const t=process.cwd();n(t.match(/^[A-Z]:\\/i),`Expected current directory to start with an absolute drive root. Actual '${t}'`);return`${t[0]}:\\${e.substr(1)}`}}n(hasAbsoluteRoot(t),`ensureAbsoluteRoot parameter 'root' must have an absolute root`);if(t.endsWith("/")||i&&t.endsWith("\\")){}else{t+=s.sep}return t+e}e.ensureAbsoluteRoot=ensureAbsoluteRoot;function hasAbsoluteRoot(t){n(t,`hasAbsoluteRoot parameter 'itemPath' must not be empty`);t=normalizeSeparators(t);if(i){return t.startsWith("\\\\")||/^[A-Z]:\\/i.test(t)}return t.startsWith("/")}e.hasAbsoluteRoot=hasAbsoluteRoot;function hasRoot(t){n(t,`isRooted parameter 'itemPath' must not be empty`);t=normalizeSeparators(t);if(i){return t.startsWith("\\")||/^[A-Z]:/i.test(t)}return t.startsWith("/")}e.hasRoot=hasRoot;function normalizeSeparators(t){t=t||"";if(i){t=t.replace(/\//g,"\\");const e=/^\\\\+[^\\]/.test(t);return(e?"\\":"")+t.replace(/\\\\+/g,"\\")}return t.replace(/\/\/+/g,"/")}e.normalizeSeparators=normalizeSeparators;function safeTrimTrailingSeparator(t){if(!t){return""}t=normalizeSeparators(t);if(!t.endsWith(s.sep)){return t}if(t===s.sep){return t}if(i&&/^[A-Z]:\\$/i.test(t)){return t}return t.substr(0,t.length-1)}e.safeTrimTrailingSeparator=safeTrimTrailingSeparator}})},413:function(t){t.exports=require("stream")},622:function(t){t.exports=require("path")},669:function(t){t.exports=require("util")},747:function(t){t.exports=require("fs")}});